<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/dashboard.css" />
    <title>Document</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="path/to/font-awesome/css/font-awesome.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>

    <script type="module" src="./js/dashboard.js"></script>
  </head>
  <body>
    <div id="loading-screen" class="loading">Loading;</div>
    <main id="dashboard-content" class="darkmode">
      <nav class="main-menu">
        <div>
          <div class="user-info">
            <img
              src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/e5a707f4-d5ac-4f30-afd8-4961ae353dbc"
              alt="user"
            />
            <p id="welcomeMessage">Welcome, User!</p>
          </div>
          <ul>
            <li class="nav-item active">
              <a href="#">
                <i class="fa fa-user nav-icon"></i>
                <span class="nav-text">Profile</span>
              </a>
            </li>

            <li class="nav-item">
              <a href="#">
                <i class="fa fa-map nav-icon"></i>
                <span class="nav-text">Discover</span>
              </a>
            </li>

            <li class="nav-item">
              <a href="#">
                <i class="fa fa-arrow-trend-up nav-icon"></i>
                <span class="nav-text">Trending</span>
              </a>
            </li>

            <li class="nav-item">
              <a href="#">
                <i class="fa-solid fa-chart-simple nav-icon"></i>
                <span class="nav-text">Analytics</span>
              </a>
            </li>

            <li class="nav-item">
              <a href="#">
                <i class="fa fa-heart nav-icon"></i>
                <span class="nav-text">Favorites</span>
              </a>
            </li>

            <li class="nav-item">
              <a href="#">
                <i class="fa-solid fa-pen-to-square nav-icon"></i>
                <span class="nav-text">Reviews</span>
              </a>
            </li>
          </ul>
        </div>

        <ul>
          <li class="nav-item">
            <a href="#">
              <i class="fa fa-gear nav-icon"></i>
              <span class="nav-text">Settings</span>
            </a>
          </li>

          <li class="nav-item">
            <a href="#">
              <i class="fa fa-right-from-bracket nav-icon"></i>
              <span class="nav-text">Logout</span>
            </a>
          </li>
        </ul>
      </nav>
    </main>

    <script>
      //! Active Navbar Item

      const navItems = document.querySelectorAll(".nav-item");

      navItems.forEach((navItem, i) => {
        navItem.addEventListener("click", () => {
          navItems.forEach((item, j) => {
            item.className = "nav-item";
          });
          navItem.className = "nav-item active";
        });
      });

      //! Share Button Popup

      const sharebtns = document.querySelectorAll(".share-btn");

      sharebtns.forEach((btn) => {
        btn.addEventListener("click", (event) => {
          const popup = btn.closest(".event-footer").querySelector(".popup");

          btn.classList.toggle("active");
          popup.classList.toggle("active");

          event.stopPropagation();
        });
      });

      document.addEventListener("click", (event) => {
        const popups = document.querySelectorAll(".popup");

        popups.forEach((popup) => {
          if (
            popup.classList.contains("active") &&
            !popup.contains(event.target)
          ) {
            popup.classList.remove("active");

            const shareBtn = popup
              .closest(".event-footer")
              .querySelector(".share-btn");
            shareBtn.classList.remove("active");
          }
        });
      });

      //! Like Buttons

      const likeBtns = document.querySelectorAll(".like-btn");

      likeBtns.forEach((likeBtn) => {
        likeBtn.addEventListener("click", () => {
          if (likeBtn.classList.contains("bxs-heart")) {
            likeBtn.classList.remove("bxs-heart");
            likeBtn.classList.add("bx-heart");
            likeBtn.classList.remove("bounce-in");
          } else {
            likeBtn.classList.add("bxs-heart");
            likeBtn.classList.remove("bx-heart");
            likeBtn.classList.add("bounce-in");
          }
        });
      });

      //! Chart JS

      const chartData = {
        labels: ["Workshop", "Theater", "Concert", "Sport"],
        data: [40, 15, 25, 20],
      };

      const chart = document.getElementById("doughnut");
      const eventList = document.querySelector(".chart ul");

      new Chart(chart, {
        type: "doughnut",
        data: {
          labels: ["Workshop", "Theater", "Concert", "Sport"],
          datasets: [
            {
              label: "# of Events",
              data: [8, 3, 5, 4],
              backgroundColor: ["#582bac", "#b31a4d", "#e48e2c", "#4a920f"],
              offset: 10,
              hoverOffset: 8,
              hoverBorderColor: "#9a999b",
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: true,
              labels: {
                color: "#8b8a96",
                font: {
                  size: 12,
                  weight: 600,
                },
              },
            },
          },
          layout: {
            padding: {
              bottom: 10,
            },
          },
        },
      });

      function population() {
        chartData.labels.forEach((label, i) => {
          let eachEvent = document.createElement("li");
          eachEvent.innerHTML = `${label}: <span class="percentage">${chartData.data[i]}%</span> `;
          eventList.appendChild(eachEvent);
        });
      }

      population();
    </script>
  </body>
</html>
